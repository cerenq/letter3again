<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ejderha Yarışı Aşk Oyunu</title>
<style>
  body {
    background: #fff8f0;
    color: #5a3e1b;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    padding: 20px;
    max-width: 600px;
    margin: auto;
    user-select: none;
  }
  h2 {
    text-align: center;
    margin-bottom: 15px;
  }
  #message {
    text-align: center;
    font-weight: bold;
    margin: 10px 0 20px 0;
    min-height: 24px;
  }
  input[type=text] {
    width: 100%;
    font-size: 1.2em;
    padding: 8px;
    border: 2px solid #c9b08c;
    border-radius: 6px;
  }
  button {
    background-color: #c9b08c;
    border: none;
    padding: 12px 25px;
    font-size: 1.2em;
    border-radius: 8px;
    cursor: pointer;
    margin-top: 15px;
    display: block;
    width: 100%;
  }
  button:hover {
    background-color: #a8895e;
  }
  .hidden {
    display: none;
  }
  #morse {
    font-family: monospace;
    font-size: 2.2em;
    letter-spacing: 6px;
    text-align: center;
    margin-bottom: 20px;
  }
  #sudoku {
    margin: 15px 0;
  }
  table {
    border-collapse: collapse;
    margin: 0 auto;
  }
  td {
    border: 1px solid #c9b08c;
    width: 32px;
    height: 32px;
    text-align: center;
  }
  input.sudoku-cell {
    width: 100%;
    height: 100%;
    border: none;
    text-align: center;
    font-size: 1.2em;
    font-weight: bold;
    background-color: #fff8f0;
  }
  #photo-section img {
    max-width: 100%;
    border-radius: 12px;
    margin-bottom: 10px;
    display: block;
    margin-left: auto;
    margin-right: auto;
  }
  #photo-question {
    font-weight: bold;
    margin-bottom: 8px;
    text-align: center;
  }
  .options {
    text-align: center;
    margin-bottom: 20px;
  }
  .options label {
    margin: 0 15px;
    font-weight: normal;
    cursor: pointer;
  }
  #final-button {
    background-color: #a8895e;
    margin-top: 0;
  }
  #overlay {
    position: fixed;
    top:0; left:0; right:0; bottom:0;
    background-color: rgba(0,0,0,0.6);
    display:flex;
    justify-content:center;
    align-items:center;
    color: #fff8f0;
    font-size: 1.8em;
    font-weight: bold;
    z-index: 9999;
  }
</style>
</head>
<body>

<h2>Ejderha Yarışında Kazanılan Kalp</h2>

<div id="morse">- .... .. -. -.- / -- .- .-. -.- !</div>

<div id="morse-input-section">
  <input type="text" id="morse-input" placeholder="Mors kodunu Latin harfleriyle yaz" autocomplete="off" />
  <button id="morse-submit">Gönder</button>
  <div id="morse-message"></div>
</div>

<div id="sudoku-section" class="hidden">
  <h3>Sudoku Bulmacası</h3>
  <div id="message"></div>
  <div id="sudoku"></div>
  <button id="sudoku-check">Kontrol Et</button>
</div>

<div id="photo-section" class="hidden">
  <h3>Fotoğraf ve Soru</h3>
  <img src="https://drive.google.com/uc?export=view&id=1rAPZ3oFtv6jo7F5Kz7TZcRe7e06VJyrZ" alt="Özel Fotoğraf" />
  <div id="photo-question">Fotoğrafta nerdesin?</div>
  <div class="options">
    <label><input type="radio" name="photo-answer" value="Üsküdar"> Üsküdar</label>
    <label><input type="radio" name="photo-answer" value="Bakırköy"> Bakırköy</label>
    <label><input type="radio" name="photo-answer" value="Beşiktaş"> Beşiktaş</label>
    <label><input type="radio" name="photo-answer" value="Kadıköy"> Kadıköy</label>
  </div>
  <button id="photo-submit">Gönder</button>
  <div id="photo-message"></div>
</div>

<div id="final-section" class="hidden" style="text-align:center;">
  <button id="final-button">Mektubunu Aç</button>
</div>

<div id="overlay" class="hidden">Sabret!</div>

<script>
const targetDate = new Date('2025-07-29T00:00:00+03:00'); // açılma tarihi

// Mors kodu doğrulama
const morseInput = document.getElementById('morse-input');
const morseSubmit = document.getElementById('morse-submit');
const morseMessage = document.getElementById('morse-message');

morseSubmit.onclick = () => {
  let val = morseInput.value.trim().toLowerCase();
  if(val === 'think mark!'){
    morseMessage.textContent = 'Helal lan, geç diğerine';
    document.getElementById('morse-input-section').classList.add('hidden');
    startSudoku();
  } else {
    morseMessage.textContent = 'Loser :b';
  }
}

// Sudoku Setup
const sudokuSection = document.getElementById('sudoku-section');
const sudokuDiv = document.getElementById('sudoku');
const sudokuCheckBtn = document.getElementById('sudoku-check');
const messageDiv = document.getElementById('message');

// Basit sudoku bulmacası (kolay seviye)
const sudokuPuzzle = [
  [5,3,null,null,7,null,null,null,null],
  [6,null,null,1,9,5,null,null,null],
  [null,9,8,null,null,null,null,6,null],
  [8,null,null,null,6,null,null,null,3],
  [4,null,null,8,null,3,null,null,1],
  [7,null,null,null,2,null,null,null,6],
  [null,6,null,null,null,null,2,8,null],
  [null,null,null,4,1,9,null,null,5],
  [null,null,null,null,8,null,null,7,9]
];

function createSudoku() {
  const table = document.createElement('table');
  for(let i=0; i<9; i++) {
    const tr = document.createElement('tr');
    for(let j=0; j<9; j++) {
      const td = document.createElement('td');
      const input = document.createElement('input');
      input.setAttribute('maxlength',1);
      input.classList.add('sudoku-cell');
      input.type = 'text';
      input.autocomplete = 'off';
      if(sudokuPuzzle[i][j] !== null) {
        input.value = sudokuPuzzle[i][j];
        input.disabled = true;
        input.style.backgroundColor = '#e3d7c1';
      }
      td.appendChild(input);
      tr.appendChild(td);
    }
    table.appendChild(tr);
  }
  sudokuDiv.appendChild(table);
}

function checkSudoku() {
  const inputs = sudokuDiv.querySelectorAll('input.sudoku-cell');
  for(let i=0; i<9; i++) {
    for(let j=0; j<9; j++) {
      const idx = i*9 + j;
      const val = inputs[idx].value;
      if(!val || isNaN(val) || val < 1 || val > 9) return false;
      if(parseInt(val) !== solution[i][j]) return false;
    }
  }
  return true;
}

// Çözüm sudoku matrisi
const solution = [
  [5,3,4,6,7,8,9,1,2],
  [6,7,2,1,9,5,3,4,8],
  [1,9,8,3,4,2,5,6,7],
  [8,5,9,7,6,1,4,2,3],
  [4,2,6,8,5,3,7,9,1],
  [7,1,3,9,2,4,8,5,6],
  [9,6,1,5,3,7,2,8,4],
  [2,8,7,4,1,9,6,3,5],
  [3,4,5,2,8,6,1,7,9]
];

sudokuCheckBtn.onclick = () => {
  if(checkSudoku()) {
    messageDiv.textContent = 'Götün kalkmasın bilerek kolay yapıyorum, geç diğerine';
    setTimeout(() => {
      sudokuSection.classList.add('hidden');
      showPhotoSection();
    }, 1500);
  } else {
    messageDiv.textContent = 'Loser :b';
  }
}

function startSudoku() {
  sudokuSection.classList.remove('hidden');
  createSudoku();
}

// Fotoğraf ve soru kısmı
const photoSection = document.getElementById('photo-section');
const photoSubmit = document.getElementById('photo-submit');
const photoMessage = document.getElementById('photo-message');

function showPhotoSection() {
  photoSection.classList.remove('hidden');
}

photoSubmit.onclick = () => {
  const options = document.getElementsByName('photo-answer');
  let selected = null;
  for(const opt of options) {
    if(opt.checked) selected = opt.value;
  }
  if(selected === 'Beşiktaş') {
    photoMessage.textContent = 'Yerim götünü, aç hadi mektubu';
    setTimeout(() => {
      photoSection.classList.add('hidden');
      showFinalSection();
    }, 1500);
  } else {
    photoMessage.textContent = 'Yuh!';
  }
}

// Son bölüm - tarih kontrolü ve mektup linki
const finalSection = document.getElementById('final-section');
const finalButton = document.getElementById('final-button');
const overlay = document.getElementById('overlay');

function showFinalSection() {
  finalSection.classList.remove('hidden');
}

finalButton.onclick = () => {
  const now = new Date();
  if(now < targetDate) {
    overlay.classList.remove('hidden');
    setTimeout(() => {
      overlay.classList.add('hidden');
    }, 2000);
  } else {
    window.open("https://www.notion.so/Merhaba-sevgilim-22cb1c2000938014973cce573bd19e15?source=copy_link", "_blank");
  }
}
</script>

</body>
</html>
